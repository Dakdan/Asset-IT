<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>Verify Account</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="./css/style.css">
<link rel="stylesheet" href="./css/ui.css">
</head>

<body>
<div class="login-wrapper">

  <div class="login-header">
    <h1>ยืนยันตัวตน</h1>
    <p>กรอกรหัสที่ได้รับทาง Email</p>
  </div>

  <div class="login-card">
    <input id="email" placeholder="Email">
    <input id="code" placeholder="Verification Code">

    <button onclick="verify()">ยืนยัน</button>
    <button class="btn-secondary" onclick="resend()">ส่งรหัสใหม่</button>
  </div>

</div>

<div id="overlay" class="overlay hidden"></div>
<div id="popup" class="popup hidden"></div>

<script src="./js/api.js"></script>
<script src="./js/ui.js"></script>

<script>
function verify() {
  showOverlay();
  callAPI('verify', {
    email: email.value,
    code: code.value
  }).then(res => {
    hideOverlay();
    if (res.success) {
      showPopup('สำเร็จ', 'ยืนยันเรียบร้อย');
      setTimeout(()=>location.href='login.html',1500);
    } else {
      showPopup('ผิดพลาด', res.message);
    }
  });
}

function resend() {
  showOverlay();
  callAPI('resend', { email: email.value })
    .then(r=>{
      hideOverlay();
      showPopup('แจ้งเตือน', r.message);
    });
}
</script>
</body>
</html>
