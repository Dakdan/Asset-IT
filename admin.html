<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>Admin Log</title>
<link rel="stylesheet" href="./css/style.css">
</head>
<body class="login-page">

<div class="login-wrapper">
<div class="login-card" style="max-width:900px">

<h2>LOG การใช้งานระบบ</h2>

<table>
<thead>
<tr><th>เวลา</th><th>Action</th><th>User</th></tr>
</thead>
<tbody id="logTable"></tbody>
</table>

</div>
</div>

<script>
function loadLog(){
  const admin = JSON.parse(localStorage.getItem('it_user')).userid;
  jsonp(
    GAS_URL + '?action=getLogs&admin=' + admin,
    'render'
  );
}

function render(res){
  const tb = document.getElementById('logTable');
  tb.innerHTML='';
  res.data.forEach(l=>{
    tb.innerHTML += `<tr>
      <td>${l.time}</td>
      <td>${l.action}</td>
      <td>${l.user}</td>
    </tr>`;
  });
}
loadLog();
</script>

</body>
</html>
